<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sphoorthy Masa - Senior UX Researcher (Portfolio)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        /* --- "Apple Energy" Theme Palette --- */
        :root {
          --color-bg: #f5f5f7;
          --color-surface: #ffffff;
          --color-surface-muted: #f0f0f5;
          --color-primary: #0077ed;
          --color-primary-hover: #005ecb;
          --color-text-primary: #0b0b0f;
          --color-text-secondary: #4c4f5a;
          --color-border: #e1e3ea;
          --color-accent-soft: rgba(0, 119, 237, 0.12);
          --color-accent-strong: rgba(0, 119, 237, 0.35);
          --color-vibrant-pink: #ff2d55;
          --color-vibrant-orange: #ff9f0a;
          --color-vibrant-green: #30d158;
          --color-vibrant-purple: #bf5af2;
          --color-chip-bg: rgba(0, 0, 0, 0.04);
          --color-chip-text: #0b0b0f;
          --color-chip-border: rgba(11, 11, 15, 0.08);
          --color-shadow-primary: rgba(0, 119, 237, 0.32);
          --color-shadow-strong: rgba(15, 23, 42, 0.18);
        }

        body{
          font-family:'Inter',sans-serif;
          color: var(--color-text-secondary);
          background-color: var(--color-bg);
          position: relative;
        }
        
        body::before { display: none; }
        #bg-canvas { display: none; }

        .content-container{
          position:relative;
          z-index:1;
          background-color: var(--color-bg);
          overflow-x: hidden;
        }

        /* --- Header --- */
        header{
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 50;
          background: linear-gradient(to bottom, rgba(245,245,247,0.95), rgba(255,255,255,0.88));
          backdrop-filter: blur(8px);
          -webkit-backdrop-filter: blur(8px);
          border-bottom: 1px solid var(--color-border);
          transition: transform .4s ease-out;
        }
        header.hidden{transform:translateY(-120%)}
        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
            gap: 1rem;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .header-logo {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .header-logo .monogram {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: var(--color-accent-soft);
            border: 1px solid var(--color-accent-strong);
            color: var(--color-primary);
            font-weight: 800;
            font-size: 1.15rem;
            display: grid;
            place-items: center;
            letter-spacing: -0.5px;
        }

        .header-logo .label {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: var(--color-text-secondary);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-weight: 600;
        }

        .header-logo .name {
            font-family: 'Inter', sans-serif;
            font-size: 1.4rem;
            color: var(--color-text-primary);
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .menu-trigger {
            margin-left: auto;
            position: relative;
            display: flex;
            align-items: center;
        }

        .hamburger-btn {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            border: 1px solid var(--color-border);
            background: var(--color-surface);
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .hamburger-btn:hover,
        .hamburger-btn:focus-visible {
            border-color: var(--color-primary);
            box-shadow: 0 10px 25px rgba(14, 165, 233, 0.2);
            transform: translateY(-1px);
            outline: none;
        }

        .hamburger-icon {
            width: 22px;
            height: 18px;
            position: relative;
        }

        .hamburger-icon span {
            position: absolute;
            left: 0;
            right: 0;
            height: 3px;
            border-radius: 999px;
            background: var(--color-text-primary);
            transition: transform 0.2s ease;
        }

        .hamburger-icon span:nth-child(1) { top: 0; }
        .hamburger-icon span:nth-child(2) { top: 7.5px; }
        .hamburger-icon span:nth-child(3) { bottom: 0; }

        .menu-panel {
            position: absolute;
            top: calc(100% + 0.75rem);
            right: 0;
            min-width: 220px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 16px;
            box-shadow: 0 25px 65px rgba(15, 23, 42, 0.18);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.25s ease, transform 0.25s ease;
            pointer-events: none;
            background-image: radial-gradient(circle at top, rgba(14,165,233,0.15), transparent 55%);
        }

        .menu-trigger:hover .menu-panel,
        .menu-trigger:focus-within .menu-panel {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        header nav a {
            color: var(--color-text-secondary);
            font-weight: 600;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            transition: color 0.2s ease, background-color 0.2s ease;
        }
        header nav a:hover {
            color: var(--color-primary);
            background-color: var(--color-accent-soft);
        }
        header nav a:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 2px;
            color: var(--color-primary);
            background-color: var(--color-accent-soft);
        }

        @media (max-width: 640px) {
            .header-inner {
                padding-inline: 1rem;
            }
            .menu-panel {
                min-width: min(320px, calc(100vw - 2rem));
                right: 0;
            }
        }

        /* --- Hero Carousel --- */
        #hero-carousel {
            width: 100%;
            padding: 120px 5% 60px; /* Offset for fixed header */
            position: relative;
        }
        .hero-track {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        .hero-card {
            background: var(--color-surface);
            border-radius: 16px;
            border: 1px solid var(--color-border);
            box-shadow: 0 18px 45px rgba(10, 15, 28, 0.08);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .hero-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 24px 55px rgba(15, 23, 42, 0.12);
        }
        .hero-card .hero-image-container {
            height: 220px;
            width: 100%;
        }
        .hero-card .hero-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .hero-card .hero-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            height: 100%;
            flex: 1;
        }
        .hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .hero-meta span {
            background: linear-gradient(120deg, rgba(0,119,237,0.12), rgba(255,45,85,0.16));
            color: var(--color-chip-text);
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.35rem 0.75rem;
            border-radius: 9999px;
            border: 1px solid rgba(0,0,0,0.08);
        }
        @media (max-width: 1023px) {
            .hero-track {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .hero-card .hero-image-container {
                height: 200px;
            }
        }
        @media (max-width: 767px) {
            #hero-carousel {
                padding: 100px 1.5rem 40px;
            }
            .hero-track {
                grid-template-columns: 1fr;
            }
            .hero-card .hero-image-container {
                height: 180px;
            }
        }

        .hero-content h2 {
            font-size: clamp(1.5rem, 2.8vw, 2.5rem);
            font-weight: 800;
            color: var(--color-text-primary);
            line-height: 1.1;
        }
        .hero-content p {
            font-size: clamp(0.95rem, 1.4vw, 1.1rem);
            color: var(--color-text-secondary);
            margin-top: 0.25rem;
        }
        .hero-buttons {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-top: auto;
            padding-top: 0.75rem;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .btn-primary {
            background-color: var(--color-primary);
            color: white;
        }
        .btn-primary:hover {
            background-color: var(--color-primary-hover);
            transform: scale(1.03);
            box-shadow: 0 4px 15px var(--color-shadow-primary);
        }
        .btn:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        
        
        /* --- REMOVED: Project Carousel Section --- */
        #portfolio { display: none; }
        
        /* --- Content Sections --- */
        .content-section {
            padding: 3rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }
        .content-section-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-text-primary);
            margin-bottom: 2rem;
            text-align: center;
        }
        .card {
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 2.5rem;
        }
        .about-card {
            padding: clamp(2rem, 4vw, 3.5rem);
        }
        .about-photo-wrapper {
            display: flex;
            justify-content: center;
        }
        .about-photo-frame {
            position: relative;
            width: min(320px, 100%);
            aspect-ratio: 3 / 4;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 20px 45px rgba(0,0,0,0.12);
        }
        .about-photo-frame::after {
            content: "";
            position: absolute;
            inset: 0;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: inherit;
            pointer-events: none;
        }
        .about-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .about-photo-label {
            position: absolute;
            left: 1.25rem;
            bottom: 1.25rem;
            background: rgba(20,20,20,0.85);
            color: #fff;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            font-size: 0.8125rem;
            font-weight: 600;
            letter-spacing: 0.02em;
        }
        .about-highlights {
            display: grid;
            gap: 1rem;
        }
        @media (min-width: 640px) {
            .about-highlights {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        @media (min-width: 1024px) {
            .about-highlights {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        .about-highlight {
            background: linear-gradient(140deg, rgba(0,119,237,0.16), rgba(255,45,85,0.14));
            border: 1px solid rgba(0,119,237,0.2);
            border-radius: 12px;
            padding: 1.25rem;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .about-highlight h4 {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        .about-highlight p {
            font-size: 0.95rem;
            color: var(--color-text-secondary);
            line-height: 1.5;
        }
        @media (max-width: 767px) {
            .about-photo-wrapper {
                order: -1;
                margin-bottom: 1.5rem;
            }
            .about-photo-frame {
                width: min(280px, 80vw);
            }
        }
        /* Apple Energy Competency Tags */
        .bg-black\/10.text-lime-400 {
            background-color: var(--color-accent-soft) !important;
            color: var(--color-primary) !important;
            border: 1px solid var(--color-accent-strong) !important;
            font-weight: 500;
        }
        /* Apple Energy Skill Tags */
        .tag-badge {
            background: rgba(0,0,0,0.04);
            color: var(--color-text-primary);
            font-size: .75rem;
            font-weight: 500;
            padding: .25rem .75rem;
            border-radius: 9999px;
            border: 1px solid rgba(0,0,0,0.08);
        }
        /* Apple Energy Skills blocks */
        .p-6.bg-gray-800\/50 {
            background: var(--color-surface-muted);
            border: 1px solid var(--color-border);
        }

        /* Impact Infographic Styles */
        .infographic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
        }
        .infographic-card {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            padding: 1.75rem;
            box-shadow: 0 25px 65px rgba(9, 9, 14, 0.08);
        }
        .infographic-card::before {
            content: "";
            position: absolute;
            inset: -40% auto auto -35%;
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, rgba(0,119,237,0.25), transparent 70%);
            z-index: 0;
            filter: blur(1px);
        }
        .infographic-card > * { position: relative; z-index: 1; }
        .infographic-card__title {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--color-text-secondary);
        }
        .infographic-card__stat {
            font-size: clamp(1.75rem, 4vw, 2.8rem);
            font-weight: 800;
            color: var(--color-text-primary);
            margin: 0.35rem 0 0.75rem;
        }
        .infographic-bar {
            width: 100%;
            height: 10px;
            border-radius: 999px;
            background: rgba(0,0,0,0.08);
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        .infographic-bar span {
            display: block;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(120deg, var(--color-vibrant-pink), var(--color-vibrant-orange));
        }
        .infographic-metrics {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1.25rem;
        }
        .infographic-metrics div {
            flex: 1;
            text-align: center;
        }
        .infographic-metrics span {
            display: block;
            font-weight: 700;
            color: var(--color-text-primary);
            font-size: 1.1rem;
        }
        .infographic-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.85rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.65);
            border: 1px solid rgba(0,0,0,0.06);
            font-size: 0.85rem;
            font-weight: 600;
        }
        .infographic-radial {
            width: 140px;
            aspect-ratio: 1;
            border-radius: 50%;
            background: conic-gradient(var(--color-vibrant-green) calc(var(--value) * 1%), rgba(0,0,0,0.08) 0);
            display: grid;
            place-items: center;
            margin: 0 auto 1rem;
            position: relative;
        }
        .infographic-radial::after {
            content: attr(data-label);
            width: 70%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: var(--color-surface);
            display: grid;
            place-items: center;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        
        /* --- Contact Button Styles --- */
        a[href^="mailto:"] {} /* Clear old generic style */

        .btn-contact {
            display: inline-block;
            width: 100%;
            font-weight: 600;
            padding: 1rem 2.5rem; /* py-4 px-10 */
            font-size: 1.125rem; /* text-lg */
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); /* shadow-lg */
            transition: all 0.2s ease;
            text-align: center;
        }
        @media (min-width: 640px) { /* sm: */
            .btn-contact {
                width: auto;
            }
        }
        .btn-email {
            background-color: var(--color-primary);
            color: white;
        }
        .btn-email:hover {
            background-color: var(--color-primary-hover);
            box-shadow: 0 4px 15px var(--color-shadow-primary);
            transform: scale(1.03);
        }
        .btn-linkedin {
            background-color: #0077B5;
            color: white;
        }
        .btn-linkedin:hover {
            background-color: #005e9c;
            box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
            transform: scale(1.03);
        }

        .btn-resume {
            background-color: transparent;
            color: var(--color-text-secondary);
            border: 2px dashed var(--color-border);
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.85;
        }
        .btn-resume:hover {
            transform: none;
        }
        
        /* --- Gilded Current Testimonials --- */
        .testimonial-scroller{max-width:1200px;margin:auto;overflow:hidden;-webkit-mask:linear-gradient(90deg,transparent,black 20%,black 80%,transparent);mask:linear-gradient(90deg,transparent,black 20%,black 80%,transparent)}
        .scroller-inner{display:flex;gap:1.5rem;width:max-content;animation:scroll 90s linear infinite}
        .testimonial-scroller:hover .scroller-inner{animation-play-state:paused}
        @keyframes scroll{to{transform:translateX(calc(-50% - .75rem))}}
        
        /* UPDATED: Testimonial Card Styling */
        .testimonial-card {
            width: 380px;
            height: 300px; /* Fixed height */
            min-height: auto;
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Pushes content */
            padding: 1.5rem; /* Use padding from .panel */
        }
        .testimonial-card p.italic {
            flex-grow: 1; /* Allows this to fill space */
            overflow-y: auto; /* Adds scroll if content is too long */
            text-align: left; /* Better for reading/scrolling */
            padding-right: 10px; /* Space for scrollbar */
            margin-bottom: 1rem;
            /* Scrollbar styling */
            scrollbar-width: thin;
            scrollbar-color: var(--color-border) var(--color-surface);
        }
        .testimonial-card p.italic::-webkit-scrollbar {
            width: 6px;
        }
        .testimonial-card p.italic::-webkit-scrollbar-track {
            background: var(--color-surface);
        }
        .testimonial-card p.italic::-webkit-scrollbar-thumb {
            background-color: var(--color-border);
            border-radius: 6px;
        }
        .testimonial-card .author-info {
            text-align: center;
            flex-shrink: 0; /* Prevents this from shrinking */
        }
        /* End Testimonial Update */

        .panel {
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: box-shadow .3s ease;
            padding: 1.5rem;
        }
        .panel:hover { box-shadow: 0 8px 32px 0 rgba(0,0,0,0.1); }
        .text-black { color: var(--color-text-primary) !important; }
        .text-gray-300, .text-gray-400 { color: var(--color-text-secondary) !important; }
        .text-lime-400 { color: var(--color-primary) !important; }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* --- Project Modal --- */
        #project-modal {
            position: fixed;
            inset: 0;
            z-index: 999;
            display: none;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            animation: fadeIn .3s ease;
        }
        #project-modal.open { display: grid; place-items: center; }
        
        .modal-content {
            position: relative;
            width: min(95vw, 1100px);
            height: min(90vh, 900px);
            background: var(--color-surface);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: slideIn .4s ease-out;
        }
        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--color-border);
            position: relative;
        }
        .modal-header h3 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        .modal-close-btn {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            transition: all .2s ease;
        }
        .modal-close-btn:hover {
            background: var(--color-accent-soft);
            color: var(--color-primary-hover);
            transform: scale(1.05);
        }
        .modal-close-btn:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            flex-grow: 1;
        }
        
        /* --- Modal Content Styling --- */
        .modal-body h4 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        .modal-body h4:first-child {
            margin-top: 0;
        }
        .modal-body h5 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.25rem;
        }
        .modal-body p {
            color: var(--color-text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .modal-body ul {
            list-style-type: disc;
            margin-left: 1.25rem;
            color: var(--color-text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .modal-body .methodology-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        .modal-body .methodology-item,
        .modal-body .insight-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.25rem;
        }
        .modal-body .stat-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-left: 4px solid var(--color-primary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        .modal-body .stat-card .stat-number {
            font-size: 2.25rem;
            font-weight: 800;
            color: var(--color-primary);
            line-height: 1;
        }
        .modal-body .stat-card .stat-description {
            font-size: .875rem;
            margin-top: .5rem;
            color: var(--color-text-secondary);
        }
        .modal-body .bg-black\/20 {
            background: #fafafa;
            border: 1px solid var(--color-border);
        }
        .modal-body .text-lime-200 { /* Override old class */
            color: #777;
            font-style: italic;
        }
        .modal-body table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .modal-body th, .modal-body td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--color-border);
            text-align: left;
            color: var(--color-text-secondary);
        }
        .modal-body th {
            background-color: #fafafa;
            color: var(--color-text-primary);
            font-weight: 600;
        }
        .modal-body .font-bold.text-lime-400 {
            color: var(--color-primary) !important;
            font-weight: 600;
        }
        /* --- End Modal Content Styling --- */

        .metric-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .metric-card-value {
            font-size: 2.25rem;
            line-height: 1;
            font-weight: 800;
            color: var(--color-primary);
        }
        .metric-card-label {
            font-size: .9rem;
            color: var(--color-text-secondary);
            margin-top: 0.25rem;
        }
        .details-tabs {
            border-bottom: 1px solid var(--color-border);
        }
        .details-tabs button {
            padding: .75rem 0.25rem;
            margin-right: 1.5rem;
            font-weight: 600;
            color: var(--color-text-secondary);
            border-bottom: 3px solid transparent;
            transition: all .3s;
        }
        .details-tabs button.active {
            color: var(--color-text-primary);
            border-bottom-color: var(--color-primary);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: contentFadeIn .5s ease; }

        /* --- Animation & Utility --- */
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes contentFadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        @keyframes slideIn{from{opacity:0;transform:translateY(30px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}

        /* --- Chatbot Widget --- */
        .chat-launcher {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 80;
            background: var(--color-primary);
            color: #fff;
            border: none;
            border-radius: 999px;
            padding: 0.85rem 1.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            box-shadow: 0 15px 35px var(--color-shadow-primary);
            cursor: pointer;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }
        .chat-launcher svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .chat-launcher:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 38px var(--color-shadow-strong);
        }
        .chat-launcher:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 4px;
        }

        .chat-panel {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: min(360px, 90vw);
            background: var(--color-surface);
            border-radius: 16px;
            border: 1px solid var(--color-border);
            box-shadow: 0 25px 60px rgba(0,0,0,0.18);
            transform: translateX(calc(100% + 3rem));
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
            z-index: 90;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            pointer-events: none;
        }
        .chat-panel.open {
            transform: translateX(0);
            pointer-events: auto;
        }
        .chat-panel__header {
            background: linear-gradient(135deg, rgba(0,119,237,0.95), rgba(255,45,85,0.9));
            color: #fff;
            padding: 1.25rem 1.5rem 1rem;
            position: relative;
        }
        .chat-panel__header h3 {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
        }
        .chat-panel__header p {
            font-size: 0.85rem;
            margin-top: 0.35rem;
            opacity: 0.88;
        }
        .chat-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.35);
            color: #fff;
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        .chat-close:hover {
            background: rgba(255,255,255,0.4);
            color: var(--color-primary-hover);
        }
        .chat-close:focus-visible {
            outline: 3px solid rgba(255,255,255,0.75);
            outline-offset: 3px;
        }
        .chat-body {
            padding: 1rem 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-messages {
            max-height: 280px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding-right: 0.25rem;
        }
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(0, 119, 237, 0.4);
            border-radius: 999px;
        }
        .chat-message {
            display: inline-flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        .chat-message__bubble {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            line-height: 1.4;
            font-size: 0.95rem;
            white-space: pre-wrap;
        }
        .chat-message.assistant .chat-message__bubble {
            background: rgba(255,255,255,0.9);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }
        .chat-message.user {
            justify-content: flex-end;
        }
        .chat-message.user .chat-message__bubble {
            background: linear-gradient(120deg, var(--color-primary), var(--color-vibrant-purple));
            color: #fff;
            border-radius: 14px 14px 2px 14px;
        }
        .chat-form {
            border-top: 1px solid var(--color-border);
            background: rgba(0,0,0,0.015);
            padding: 0.85rem 1.25rem 1.25rem;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 0.75rem;
        }
        .chat-form input[type="text"] {
            background: #fff;
            border: 1px solid var(--color-border);
            border-radius: 999px;
            padding: 0.65rem 1rem;
            font-size: 0.95rem;
            color: var(--color-text-primary);
        }
        .chat-form input[type="text"]:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-accent-soft);
        }
        .chat-submit {
            background: var(--color-primary);
            color: #fff;
            border: none;
            border-radius: 999px;
            padding: 0.65rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .chat-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px var(--color-shadow-primary);
        }
        .chat-submit:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        .chat-status {
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            text-align: center;
        }
        @media (max-width: 640px) {
            .chat-launcher {
                right: 1.25rem;
                bottom: 1.5rem;
            }
            .chat-panel {
                right: 0.75rem;
                bottom: 1.5rem;
            }
        }

        .reveal{opacity:0;transform:translateY(50px);transition:opacity .8s ease-out,transform .8s ease-out}
        .reveal.visible{opacity:1;transform:translateY(0)}

        .main-container{max-width:1400px; margin: 0 auto;}
        
        /* --- Media carousel styles (for inside modal) --- */
        .media-viewer{position:relative;width:100%;max-width:1100px;margin-inline:auto}
        .media-stage{
            position:relative;
            width:100%;
            aspect-ratio:16/9;
            border-radius:12px; /* Rounded edges */
            overflow:hidden;
            background:var(--color-bg); /* Clean bg */
            display:grid;
            place-items:center;
        }
        .media-stage img{width:100%;height:100%;object-fit:contain;cursor:zoom-in;user-select:none;-webkit-user-drag:none}
        
        .media-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:.75rem;pointer-events:none}
        .media-btn{pointer-events:auto;width:42px;height:42px;display:grid;place-items:center;border-radius:9999px;background:rgba(255,255,255,.85);border:1px solid rgba(0,0,0,.1);color:var(--color-text-primary);cursor:pointer;transition:transform .15s ease,background .15s ease,opacity .15s ease;backdrop-filter:blur(8px) saturate(160%)}
        .media-btn:hover{transform:scale(1.06);background:#fff}
        .media-btn:disabled{opacity:.4;cursor:not-allowed}
        .media-meta{margin-top:.6rem;display:flex;align-items:center;justify-content:space-between;gap:.75rem;color:#334155}
        .media-pager{font-variant-numeric:tabular-nums;opacity:.85}
        
        .lightbox{position:fixed;inset:0;z-index:9999;display:none;background:rgba(9,12,16,.75);backdrop-filter:blur(6px) saturate(140%)}
        .lightbox.open{display:grid}
        .lightbox-inner{position:relative;width:min(96vw,1400px);height:min(92vh,860px);margin:auto;display:grid;grid-template-rows:1fr auto;gap:.75rem}
        .lightbox-stage{position:relative;width:100%;height:100%;border-radius:16px;overflow:hidden;background:#0b1020;display:grid;place-items:center;border:1px solid rgba(255,255,255,.15)}
        .lightbox-stage img{width:100%;height:100%;object-fit:contain;user-select:none;-webkit-user-drag:none}
        .lightbox-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:1rem;pointer-events:none}
        .lightbox-btn{pointer-events:auto;width:46px;height:46px;border-radius:9999px;display:grid;place-items:center;background:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.15);color:var(--color-text-primary);cursor:pointer;transition:transform .15s ease,background .15s ease;backdrop-filter:blur(8px) saturate(160%)}
        .lightbox-btn:hover{transform:scale(1.06);background:#fff}
        .lightbox-topbar{display:flex;justify-content:space-between;align-items:center;color:#e5e7eb;font-size:.95rem}
        .lightbox-topbar .close{width:42px;height:42px;border-radius:9999px;display:grid;place-items:center;background:rgba(255,255,255,.88);color:var(--color-text-primary);border:1px solid rgba(0,0,0,.12);cursor:pointer;transition:transform .15s ease,background .15s ease}
        .lightbox-topbar .close:hover{transform:scale(1.06);background:#fff}
    </style>
</head>
<body class="antialiased">

    <div class="content-container">
        <header>
            <div class="header-inner">
                <a href="#hero-carousel" class="header-brand">
                    <div class="monogram" aria-hidden="true">SM</div>
                    <div class="header-logo">
                        <span class="label">Portfolio</span>
                        <span class="name">Sphoorthy Masa</span>
                    </div>
                </a>
                <div class="menu-trigger">
                    <button class="hamburger-btn" aria-haspopup="true" aria-label="Open navigation menu">
                        <span class="hamburger-icon" aria-hidden="true">
                            <span></span>
                            <span></span>
                            <span></span>
                        </span>
                    </button>
                    <nav class="menu-panel" aria-label="Primary">
                        <a href="#about">About</a>
                        <a href="#skills">Skills</a>
                        <a href="#testimonials">Testimonials</a>
                        <a href="#why-me-contact">Contact</a>
                    </nav>
                </div>
            </div>
        </header>

        <main>
            <section id="hero-carousel" class="reveal">
                <div class="hero-track"></div>
            </section>

            <div class="main-container">
                <section id="about" class="content-section reveal">
                    <div class="card about-card">
                        <div class="grid lg:grid-cols-[1fr,1.25fr] gap-12 items-center">
                            <div class="about-photo-wrapper">
                                <div class="about-photo-frame">
                                    <img src="/public/images/IMG_2526.jpg">
                                    <span class="about-photo-label">Lead UX Researcher</span>
                                </div>
                            </div>
                            <div class="space-y-6">
                                <div class="space-y-3">
                                    <h3 class="text-3xl font-bold text-black">About Me</h3>
                                    <p class="text-lg text-gray-300 max-w-2xl">I connect human stories to product decisions, helping cross-functional teams move from uncertainty to confident, insight-led action.</p>
                                </div>
                                <div class="about-highlights">
                                    <article class="about-highlight">
                                        <h4>Strategic Partner</h4>
                                    </article>
                                    <article class="about-highlight">
                                        <h4>Mixed-Methods Expert</h4>
                                    </article>
                                    <article class="about-highlight">
                                        <h4>Team Catalyst</h4>
                                         </article>
                                        <article class="about-highlight">
                                        <h4>Voice of UXR</h4>
                                    </article>
                                    <article class="about-highlight">
                                        <h4>Leadership</h4>
                                    </article>
                                    <article class="about-highlight">
                                        <h4>Research Methodologies</h4>
                                    </article>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="skills" class="content-section reveal">
                    <div class="card">
                        <div class="text-center mb-8">
                            <h3 class="text-4xl font-bold text-black">Skills & Expertise</h3>
                            <p class="text-lg text-gray-400 mt-2">A comprehensive look at my research methodologies, tools, and frameworks.</p>
                        </div>
                        <div class="flex flex-col md:flex-row gap-8">
                            <div class="flex-1 p-6 bg-gray-800/50 rounded-xl border border-gray-700/50">
                                <h4 class="text-2xl font-semibold text-black mb-4">Research Methodologies</h4>
                                <div class="space-y-4">
                                    <div>
                                        <h5 class="text-lg font-bold text-black mb-2">Quantitative</h5>
                                        <div class="flex flex-wrap gap-2">
                                            <span class="tag-badge">Surveys</span>
                                            <span class="tag-badge">A/B Testing</span>
                                            <span class="tag-badge">Data Analysis</span>
                                            <span class="tag-badge">First-click Testing</span>
                                        </div>
                                    </div>
                                    <div>
                                        <h5 class="text-lg font-bold text-black mb-2">Qualitative</h5>
                                        <div class="flex flex-wrap gap-2">
                                            <span class="tag-badge">User Interviews</span>
                                            <span class="tag-badge">Usability testing</span>
                                            <span class="tag-badge">Card Sorting</span>
                                            <span class="tag-badge">Contextual Interviews</span>
                                            <span class="tag-badge">Focus Groups</span>
                                            <span class="tag-badge">Journey mapping</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex-1 p-6 bg-gray-800/50 rounded-xl border border-gray-700/50">
                                <h4 class="text-2xl font-semibold text-black mb-4">Tools & Software</h4>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">UserZoom</span>
                                    <span class="tag-badge">User Interviews</span>
                                    <span class="tag-badge">UserTesting</span>
                                    <span class="tag-badge">Qualtrics</span>
                                    <span class="tag-badge">Figma</span>
                                    <span class="tag-badge">Hotjar</span>
                                    <span class="tag-badge">Dovetail</span>
                                </div>

                                <h4 class="text-2xl font-semibold text-black mt-8 mb-4">Process & Frameworks</h4>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tag-badge">Agile</span>
                                     <span class="tag-badge">Waterfall</span>
                                    <span class="tag-badge">Dual-track Agile</span>
                                    <span class="tag-badge">Jobs To Be Done (JTBD)</span>
                                    <span class="tag-badge">Design Thinking</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="insights" class="content-section reveal">
                    <div class="card" style="background: radial-gradient(circle at top right, rgba(191,90,242,0.08), transparent 45%), var(--color-surface);">
                        <div class="text-center mb-12">
                            <p class="uppercase tracking-[0.25em] text-xs font-semibold text-gray-400">Infographics</p>
                            <h3 class="text-4xl font-bold text-black mt-2">Impact Signals at a Glance</h3>
                            <p class="text-lg text-gray-300 mt-4 max-w-3xl mx-auto">Product dashboards, these quick reads show how my research practice accelerates clarity, energizes teams, and keeps experience quality measurable.</p>
                        </div>
                        <div class="infographic-grid">
                            <article class="infographic-card">
                                <p class="infographic-card__title">Research Reach</p>
                                <p class="infographic-card__stat">248 studies</p>
                                <div class="infographic-bar" aria-hidden="true">
                                    <span style="width:86%"></span>
                                </div>
                                <p class="text-sm text-gray-400">Enterprise programs touched in the last 18 months.</p>
                                <div class="infographic-metrics">
                                    <div>
                                        <span>32</span>
                                        <small class="text-gray-400 text-xs uppercase tracking-wide">Product Pods</small>
                                    </div>
                                    <div>
                                        <span>34</span>
                                        <small class="text-gray-400 text-xs uppercase tracking-wide">Markets</small>
                                    </div>
                                </div>
                            </article>
                            <article class="infographic-card">
                                <p class="infographic-card__title">Decision Confidence</p>
                                <div class="infographic-radial" style="--value:82" data-label="82%"></div>
                                <p class="text-sm text-gray-400 text-center">Stakeholders reporting faster go/no-go calls after synthesis briefs.</p>
                                <div class="flex items-center justify-center gap-3 mt-4">
                                    <span class="infographic-pill" style="color: var(--color-vibrant-green);">+18 pts</span>
                                    <span class="infographic-pill" style="color: var(--color-primary);">NPS uplift</span>
                                </div>
                            </article>
                            <article class="infographic-card">
                                <p class="infographic-card__title">Speed to Insight</p>
                                <p class="infographic-card__stat">4.5 days</p>
                                <p class="text-sm text-gray-400">Average time from kickoff to signal-ready readouts for evaluative work.</p>
                                <ul class="mt-4 space-y-3 text-sm text-gray-400">
                                    <li class="flex items-center justify-between">
                                        <span>Diary + interviews</span>
                                        <strong class="text-black">7 days</strong>
                                    </li>
                                    <li class="flex items-center justify-between">
                                        <span>Rapid UX Score</span>
                                        <strong class="text-black">72 hrs</strong>
                                    </li>
                                    <li class="flex items-center justify-between">
                                        <span>Survey pulses</span>
                                        <strong class="text-black">48 hrs</strong>
                                    </li>
                                </ul>
                            </article>
                            <article class="infographic-card">
                                <p class="infographic-card__title">Experience Health</p>
                                <p class="infographic-card__stat">9.2 / 10</p>
                                <p class="text-sm text-gray-400">Average UMUX-Lite score across flagship releases.</p>
                                <div class="flex flex-wrap gap-2 mt-4">
                                    <span class="infographic-pill" style="color: var(--color-vibrant-orange);">Mobile</span>
                                     <span class="infographic-pill" style="color: var(--color-vibrant-orange);"> TV</span>
                                     <span class="infographic-pill" style="color: var(--color-vibrant-orange);"> Streaming</span>
                                    <span class="infographic-pill" style="color: var(--color-vibrant-pink);">Voice UI</span>
                                    <span class="infographic-pill" style="color: var(--color-vibrant-purple);">Commerce</span>
                                    <span class="infographic-pill" style="color: var(--color-vibrant-green);">Platform</span>
                                </div>
                            </article>
                        </div>
                    </div>
                </section>

                <section id="why-me-contact" class="content-section reveal">
                    <div class="card p-12 flex flex-col md:flex-row items-center gap-12">
                        <div class="md:w-1/2 text-left">
                            <h3 class="text-3xl font-bold text-black mb-4">Why Me?</h3>
                            <div class="text-lg text-gray-300 space-y-4 max-w-prose">
                                <p>Good research doesn't just inform. It transforms how teams think, build, and connect with their users. I focus on turning insights into action and action into impact.</p>
                                <p class="font-semibold text-2xl mt-6 text-black">User insights shouldn't be boring. And neither should your researcher. </p>
                            </div>
                        </div>
                        <div class="md:w-px h-full bg-gray-200 md:block hidden"></div>
                        <div class="md:w-1/2 text-center">
                            <h3 class="text-4xl font-bold text-black mb-4">Let's Build Something Meaningful</h3>
                            <p class="text-lg text-gray-300 mb-8">If you're building a team where research plays a strategic role, I'd love the opportunity to contribute.</p>
                            <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                                <a href="https://www.linkedin.com/in/smasa" target="_blank" rel="noopener noreferrer" class="btn-contact btn-linkedin">
                                    LinkedIn
                                </a>
                                <a href="mailto:Sphoorthy.Masa@outlook.com" class="btn-contact btn-email">
                                    Email Me
                                </a>
                                <span class="btn-contact btn-resume" role="status" aria-label="Resume link coming soon. Hosting link will be published soon.">
                                    Resume
                                    <span class="sr-only">Resume link coming soon. Hosting link will be published soon.</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="testimonials" class="content-section reveal">
                    <div class="text-center pb-8"><h3 class="text-4xl font-bold text-black">Testimonials</h3></div>
                    <div id="testimonial-scroller" class="testimonial-scroller"></div>
                </section>
            </div>
        </main>

        <footer class="text-center py-10 mt-10 border-t border-gray-200"><p class="text-gray-400">&copy; 2019 Sphoorthy Masa. All Rights Reserved.</p></footer>
    </div>
    
    <div id="project-modal">
        <div class="modal-content">
            <header class="modal-header">
                <h3>Project Details</h3>
                <button class="modal-close-btn" aria-label="Close">&times;</button>
            </header>
            <div class="modal-body">
                </div>
        </div>
    </div>
    <button id="chat-toggle" class="chat-launcher" type="button" aria-expanded="false" aria-controls="chat-panel">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5A8.5 8.5 0 0 1 21 11v.5z" />
        </svg>
        Chat
    </button>

    <aside id="chat-panel" class="chat-panel" aria-hidden="true" aria-label="Sphoorthy's chat companion">
        <div class="chat-panel__header">
            <h3>Sporty</h3>
            <p>Your UX research sidekick.</p>
            <button type="button" class="chat-close" aria-label="Close chat">&times;</button>
        </div>
        <div class="chat-body">
            <div id="chat-messages" class="chat-messages" role="log" aria-live="polite" aria-relevant="additions"></div>
            <div id="chat-status" class="chat-status" aria-live="polite"></div>
        </div>
        <form id="chat-form" class="chat-form" autocomplete="off">
            <label for="chat-input" class="sr-only">Ask a question</label>
            <input id="chat-input" type="text" name="message" placeholder="Ask me about the work..." required>
            <button class="chat-submit" type="submit">Send</button>
        </form>
    </aside>

   <script>
    let chatHistory = [];
   document.addEventListener('DOMContentLoaded', function() {
        /* ========== Header Scroll Effect ========== */
        const header=document.querySelector('header');
        let lastScrollTop=0;
        window.addEventListener('scroll',()=>{
            let st=window.pageYOffset||document.documentElement.scrollTop;
            if(st>lastScrollTop&&st>100){header.classList.add('hidden');}
            else if(st<100){header.classList.remove('hidden');}
            lastScrollTop=st<=0?0:st;
        },false);

        /* ========== Reveal on Scroll ========== */
        const observer=new IntersectionObserver((entries)=>{
            entries.forEach(entry=>{ if(entry.isIntersecting) entry.target.classList.add('visible'); });
        },{threshold:0.1});
        document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));

        // Prevent chatbot errors: a simple placeholder until we connect real data
        const getProjectData = () => {
            return {};  
        };

               /* ========== Chat Companion ========== */
        const chatToggleBtn = document.getElementById('chat-toggle');
        const chatPanel     = document.getElementById('chat-panel');
        const chatCloseBtn  = chatPanel ? chatPanel.querySelector('.chat-close') : null;
        const chatForm      = document.getElementById('chat-form');
        const chatInput     = document.getElementById('chat-input');
        const chatMessages  = document.getElementById('chat-messages');
        const chatStatus    = document.getElementById('chat-status');
        const adminEndpoint = (document.body && document.body.dataset)
          ? document.body.dataset.chatStore
          : '';

        let isChatOpen = false;

        const appendMessage = (role, text) => {
            if (!chatMessages) return;
            const wrap   = document.createElement('div');
            wrap.className = `chat-message ${role}`;
            const bubble = document.createElement('div');
            bubble.className = 'chat-message__bubble';
            bubble.textContent = text;
            wrap.appendChild(bubble);
            chatMessages.appendChild(wrap);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };

        const addProjectStarters = () => {
            if (!chatMessages) return;

            const wrap = document.createElement('div');
            wrap.className = 'chat-quick-replies';
            wrap.style.display = 'flex';
            wrap.style.flexWrap = 'wrap';
            wrap.style.gap = '0.5rem';
            wrap.style.marginTop = '0.5rem';

            const starters = [
                {
                    label: 'Reinventing the TV Guide',
                    question: 'Can you walk me through the Reinventing the TV Guide project and the main outcomes?'
                },
                {
                    label: 'Gundersen Pharmacy',
                    question: 'Tell me about the Gundersen Pharmacy app project and what impact it had.'
                },
                {
                    label: 'Live Rooms',
                    question: 'What was the Live Rooms concept and what did the research show?'
                }
            ];

            starters.forEach(item => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = item.label;
                btn.style.borderRadius = '999px';
                btn.style.border = '1px solid var(--color-border)';
                btn.style.padding = '0.4rem 0.9rem';
                btn.style.fontSize = '0.8rem';
                btn.style.cursor = 'pointer';
                btn.style.background = 'var(--color-surface)';
                btn.style.color = 'var(--color-text-primary)';
                btn.onclick = () => {
                    handleUserMessage(item.question);
                    wrap.remove();
                };
                wrap.appendChild(btn);
            });

            chatMessages.appendChild(wrap);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };

        const toggleChat = (force) => {
            if (!chatPanel || !chatToggleBtn) return;
            const nextState = typeof force === 'boolean' ? force : !isChatOpen;
            isChatOpen = nextState;
            chatPanel.classList.toggle('open', isChatOpen);
            chatPanel.setAttribute('aria-hidden', String(!isChatOpen));
            chatToggleBtn.setAttribute('aria-expanded', String(isChatOpen));
            if (isChatOpen) {
                window.requestAnimationFrame(() => {
                    chatInput && chatInput.focus({ preventScroll: true });
                });
            }
        };

        const sendQuestionToAdmin = async (question) => {
            if (!question || !adminEndpoint) return;
            try {
                await fetch(adminEndpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question, askedAt: new Date().toISOString() })
                });
            } catch (err) {
                console.warn('Chat archive request failed (safe to ignore).', err);
            }
        };

        const handleUserMessage = async (message) => {
            if (!message) return;

            appendMessage('user', message);
            chatStatus && (chatStatus.textContent = 'Thinking');

            // update local history
            chatHistory.push({ role: 'user', content: message });
            if (chatHistory.length > 10) {
                chatHistory = chatHistory.slice(-10);
            }

            // read numbers from the hidden project-data div
            const projectData = getProjectData();

            // optional: log to Google Apps Script
            await sendQuestionToAdmin(message);

            try {
                const res = await fetch('/api/portfolio-chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query: message,
                        history: chatHistory,
                        projectData: projectData
                    }),
                });

                const data  = await res.json();
                const reply = data?.text || 'Sorry, I could not generate a response right now.';

                // short, simple assistant reply from Sporty
                appendMessage('assistant', reply);

                chatHistory.push({ role: 'assistant', content: reply });
                if (chatHistory.length > 10) {
                    chatHistory = chatHistory.slice(-10);
                }
            } catch (err) {
                console.error(err);
                // simple fallback, not whimsical
                const fallback = 'Something went wrong on my side. You can refresh and try again, or ask a simpler question about Sphoorthys UX work.';
                appendMessage('assistant', fallback);

                chatHistory.push({ role: 'assistant', content: fallback });
                if (chatHistory.length > 10) {
                    chatHistory = chatHistory.slice(-10);
                }
            } finally {
                chatStatus && (chatStatus.textContent = '');
            }
        };

        // Initialize chat wiring
        if (chatToggleBtn && chatPanel && chatForm && chatInput && chatMessages) {
            appendMessage(
                'assistant',
                "Hi, I'm Sporty, Sphoorthys UX research assistant. I can walk you through key projects or answer questions about her work."
            );
            addProjectStarters();

            chatToggleBtn.addEventListener('click', () => toggleChat());
            chatForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const value = (chatInput.value || '').trim();
                if (!value) return;
                chatInput.value = '';
                handleUserMessage(value);
            });

            chatPanel.addEventListener('transitionend', () => {
                if (isChatOpen) {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            });

            if (chatCloseBtn) {
                chatCloseBtn.addEventListener('click', () => toggleChat(false));
            }
            document.addEventListener('keydown', (evt) => {
                if (evt.key === 'Escape' && isChatOpen) {
                    toggleChat(false);
                }
            });
        }

        /* ================= Projects (FULL ORIGINAL DATA + HIGH-RES IMAGES) ================= */
        const projects=[
            { 
                id:'guide',
                title:"Reinventing The TV Guide",
                hook:"A strategic research initiative to unify user experiences across two major platforms, turning a point of friction into a driver for engagement and revenue.",
                outcome:"~$7.46M Estimated Annual Impact",
                tags:['Strategic Research','Data-Driven Insights','Business Impact'],
                // UPDATED: Using high-resolution image to prevent blur
                images:["./images/Guide/7.png"],
                content:{
                    metrics:[
                        {value:"~$7.46M",label:"Estimated Annual Value Impact"},
                        {value:"90%",label:"Target Task Success Rate"},
                        {value:"12%",label:"Reduction in CX Complaints"}
                    ],
                    overview:`<div class="text-left space-y-6"><div><h5 class="font-bold text-black text-lg">Background</h5><p class="text-gray-300 mt-1">The guide sits at the heart of content discovery, but had evolved in parallel across Sling TV and Dish TV, creating fragmented experiences.</p></div><div><h5 class="font-bold text-black text-lg">The Challenge</h5><p class="text-gray-300 mt-1">How can we unify the guide experience to enhance usability and personalization without alienating loyal users on two very different platforms?</p></div><div><h5 class="font-bold text-black text-lg">Key Objectives</h5><ul class="list-disc list-inside pl-4 space-y-2 mt-2"><li>Identify user frustrations and unmet needs across both platforms.</li><li>Uncover shared pain points to guide a unified design strategy.</li><li>Deliver actionable recommendations that balance user needs and business goals.</li></ul></div></div>`,
                    methodology:`<h4>My Research Process & Tools</h4><div class="methodology-container mt-6">
                        <div class="methodology-item">
                            <h5>1. Discovery & Planning</h5>
                            <p>Stakeholder Interviews, Data Analysis, and Defining Project Scope.</p>
                            <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">UserZoom</span><span class="tag-badge">Google Analytics</span><span class="tag-badge">JIRA</span></div>
                        </div>
                        <div class="methodology-item">
                            <h5>2. Generative Research</h5>
                            <p>In-depth User Interviews to uncover behaviors and motivations.</p>
                            <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">User Interviews</span><span class="tag-badge">Lookback</span><span class="tag-badge">Google Meet</span></div>
                        </div>
                        <div class="methodology-item">
                            <h5>3. Synthesis & Ideation</h5>
                            <p>Mapping insights and collaborating with design and product teams.</p>
                            <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">Miro</span><span class="tag-badge">Figma</span></div>
                        </div>
                        <div class="methodology-item">
                            <h5>4. Validation & Delivery</h5>
                            <p>Usability Testing and Handoff to Engineering teams.</p>
                            <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">UserTesting.com</span><span class="tag-badge">Figma Prototypes</span><span class="tag-badge">Confluence</span></div>
                        </div>
                    </div>`,
                    analysis:`<h4>Target Audience & Segments</h4><div class="flex flex-col md:flex-row gap-4 mt-4 text-left"><div class="flex-1 p-4 bg-black/20 rounded-lg border border-black/10"><h5 class="font-bold text-black">DISH TV Subscribers (65+)</h5><p class="text-sm text-gray-300">Tolerate outdated UI but struggle with hidden features; often have accessibility needs.</p></div><div class="flex-1 p-4 bg-black/20 rounded-lg border border-black/10"><h5 class="font-bold text-black">Sling TV Subscribers (~35)</h5><p class="text-sm text-gray-300">Tech-savvy, expect fast, intuitive interfaces and quick content access.</p></div></div><h4 class="mt-8">Key Quantitative Insights</h4><div class="grid md:grid-cols-2 gap-4 mt-4 text-gray-300 text-left"><div class="insight-card"><h5>1. High Engagement, Low Conversion</h5><ul class="text-sm list-disc list-inside my-2 space-y-1"><li><b>Sling TV:</b> 79% engagement &rarr; 56% playback</li><li><b>DISH TV:</b> 86% engagement &rarr; 48% playback</li></ul><p class="text-sm text-lime-200"> Insight: Strong adoption, but poor discoverability leads to drop-offs.</p></div><div class="insight-card"><h5>2. Underutilized Features</h5><ul class="text-sm list-disc list-inside my-2 space-y-1"><li>73% of sessions used the default "ALL" filter.</li><li>"Favorites" users had a 64% playback rate vs. 55% for others.</li></ul><p class="text-sm text-lime-200"> Insight: Personalization improves engagement but is underused.</p></div><div class="insight-card"><h5>3. High Drop-Offs in Short Sessions</h5><ul class="text-sm list-disc list-inside my-2 space-y-1"><li>44% of Sling guide sessions ended without playback.</li><li>Most of these non-playback sessions lasted &lt;20 seconds.</li></ul><p class="text-sm text-lime-200"> Insight: Users abandon quickly, suggesting poor content surfacing.</p></div><div class="insight-card"><h5>4. Habitual Navigation (DISH)</h5><ul class="text-sm list-disc list-inside my-2 space-y-1"><li>46% of users navigated vertically by habit.</li><li>Only 8% used faster horizontal navigation by time.</li></ul><p class="text-sm text-lime-200"> Insight: Users may not be aware of more efficient navigation options.</p></div></div>`,
                    results:`<p class="text-center text-lg">The research insights directly led to iterative design improvements, validating each solution through rigorous testing to ensure it met user needs and business goals.</p><h4 class="mt-8">Financial Impact</h4><div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 text-gray-300"><div class="stat-card"><div class="stat-number">~$5.83M</div><div class="stat-description">from Increased Retention</div></div><div class="stat-card"><div class="stat-number">~$1.94M</div><div class="stat-description">from Feature Upsells</div></div><div class="stat-card"><div class="stat-number">~$193k</div><div class="stat-description">from Ad Revenue</div></div><div class="stat-card"><div class="stat-number">~$63k</div><div class="stat-description">from Ops Savings</div></div></div>`,
                    media: `
                      <h4 class="text-xl font-bold text-slate-900">Media</h4>
                      <div class="media-viewer mt-3" data-media='${JSON.stringify(
                        Array.from({length:16},(_,i)=>`./images/Guide/${i+1}.png`)
                      )}'>
                        <div class="media-stage">
                          <img alt="Guide 1" />
                          <div class="media-controls">
                            <button class="media-btn prev" aria-label="Previous">&#10094;</button>
                            <button class="media-btn next" aria-label="Next">&#10095;</button>
                          </div>
                        </div>
                        <div class="media-meta">
                          <div class="media-caption">Guide 1</div>
                          <div class="media-pager"><span class="cur">1</span> / <span class="total">16</span></div>
                        </div>
                      </div>
                      <p class="mt-4 text-sm text-center text-slate-600">
                        Click the image to view full-screen. Use   keys to navigate. Press ESC to close.
                      </p>
                    `
                }
            },
            {
                id:'gundersen',
                title:"Gundersen Pharmacy",
                hook:"Streamlining prescription refills by empowering patients and reducing manual work for pharmacy staff, resulting in significant cost savings and improved patient satisfaction.",
                outcome:"Achieved 12,334+ Active App Users within 6 months.",
                tags:['Workflow Analysis','Adoption Strategy','Usability Testing'],
                images:["./images/Gundersen/6.png"],
                content:{
                    metrics:[
                        { value:"12,334+", label:"Active App Users" },
                        { value:"36%", label:"Refill Volume through App" },
                        { value:"$702k+", label:"Annual Labor Cost Savings" }
                    ],
                    overview:`<div class="text-left space-y-6">
                        <div>
                            <h5 class="font-bold text-black text-lg">Background</h5>
                            <p class="text-gray-300 mt-1">The pharmacy app was designed to simplify and modernize the prescription refill experience. It aimed to reduce the repetitive, manual burden on pharmacists and empower patients with self-service medication management.</p>
                        </div>
                        <div>
                            <h5 class="font-bold text-black text-lg">Research Goals</h5>
                            <ul class="list-disc list-inside pl-4 space-y-2 mt-2">
                                <li><b>Boost Adoption:</b> Achieve 10,000+ active app users within 6 months.</li>
                                <li><b>Drive Prescription Orders:</b> Convert 25% of monthly refills (11,250 orders) through the app.</li>
                                <li><b>Automate Communications:</b> Deliver 10,000+ refill reminders & status messages monthly.</li>
                                <li><b>Reduce Staff Burden:</b> Decrease pharmacist time spent on refill calls by 50%, and reduce medical staff back-and-forth.</li>
                                <li><b>Cost Optimization:</b> Recover up to $1M/year in lost labor time.</li>
                            </ul>
                        </div>
                    </div>`,
                    methodology:`<div class="space-y-6">
                        <p class="text-sm text-gray-300">Our research was a blend of qualitative and quantitative methods to understand both the user experience and the internal workflow challenges.</p>
                        <h4 class="font-bold text-black text-lg mb-2">Manual Workflow </h4>
                        <p class="text-sm text-gray-300">The manual process was time-consuming and inefficient. Pharmacists spent an average of 3.5 minutes per refill, totaling over 2,600 hours/month, which translated to significant lost labor time.</p>
                        <div class="methodology-container mt-4">
                            <div class="methodology-item">
                                <h5>1. Workflow & Stakeholder Analysis</h5>
                                <p>Interviews with pharmacists, RNs, and MAs to map the manual refill process.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">Stakeholder Interviews</span><span class="tag-badge">Process Mapping</span></div>
                            </div>
                            <div class="methodology-item">
                                <h5>2. Usability & Heuristic Evaluation</h5>
                                <p>Tested the existing app with both patients and staff to identify pain points and opportunities.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">Heuristic Analysis</span><span class="tag-badge">Usability Testing</span></div>
                            </div>
                            <div class="methodology-item">
                                <h5>3. Discovery & Synthesis</h5>
                                <p>Uuncovered a key problem: most patients were unaware the app existed. This shifted our focus from product improvement to a marketing and awareness strategy.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">Patient Interviews</span><span class="tag-badge">Journey Mapping</span></div>
                            </div>
                        </div>
                    </div>`,
                    analysis:`<div class="space-y-8">
                        <div>
                            <h4 class="font-bold text-black text-lg mb-4">Key Insights from Analysis</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4 text-left">
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Minimalist UI & High Usability</h5>
                                    <p class="text-sm text-gray-300">The app's core functionality was clear, allowing users to refill prescriptions with ease. <b>Task success rate was 95%.</b></p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Unexpected Awareness Gap</h5>
                                    <p class="text-sm text-gray-300">A major finding: many patients were simply <b>unaware the app existed.</b> This shifted our focus from product improvement to a marketing and awareness strategy.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Low Emotional Engagement</h5>
                                    <p class="text-sm text-gray-300">A SUS Score of 78 indicated solid usability but highlighted a <b>lack of emotional engagement</b> due to the app's basic visual design.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Automated Communications</h5>
                                    <p class="text-sm text-gray-300">The system lacked features to reduce the repetitive, manual burden on pharmacists and their outbound calls.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,
                    results:`<div class="space-y-8">
                        <p class="text-center text-lg text-gray-300">Our research led to a strategic awareness campaign that directly addressed the adoption problem and produced significant business impact.</p>
                        <h4 class="font-bold text-black text-lg">Key Outcomes</h4>
                        <div class="overflow-x-auto relative rounded-lg border border-black/10 mt-4">
                            <table class="w-full text-sm text-left text-gray-400">
                                <thead class="text-xs text-gray-2 00 uppercase bg-gray-800/50">
                                    <tr>
                                        <th scope="col" class="py-3 px-6 text-center">Metric</th>
                                        <th scope="col" class="py-3 px-6 text-center">Outcome</th>
                                        <th scope="col" class="py-3 px-6 text-center">Target</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-gray-900/40 border-b border-gray-700">
                                        <th scope="row" class="py-4 px-6 font-medium text-black blackspace-nowrap">Active App Users</th>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">12,334</td>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">10,000+</td>
                                    </tr>
                                    <tr class="bg-gray-900/40 border-b border-gray-700">
                                        <th scope="row" class="py-4 px-6 font-medium text-black blackspace-nowrap">Monthly Refills via App</th>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">16,476</td>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">11,250</td>
                                    </tr>
                                    <tr class="bg-gray-900/40">
                                        <th scope="row" class="py-4 px-6 font-medium text-black blackspace-nowrap">Annual Labor Savings</th>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">$702,000+</td>
                                        <td class="py-4 px-6 text-center font-bold text-lime-400">$1M</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="text-center text-lg mt-8 text-gray-300">By shifting our focus from product development to an awareness campaign, the app's adoption skyrocketed, resulting in significant cost savings and improved patient satisfaction.</p>
                    </div>`,
                   media: `
                      <h4 class="text-xl font-bold text-slate-900">Media</h4>
                      <div class="media-viewer mt-3" data-media='${JSON.stringify(
                        Array.from({length:6},(_,i)=>`./images/Gundersen/${i+1}.png`)
                      )}'>
                        <div class="media-stage">
                          <img alt="Gundersen 1" />
                          <div class="media-controls">
                            <button class="media-btn prev" aria-label="Previous">&#10094;</button>
                            <button class="media-btn next" aria-label="Next">&#10095;</button>
                          </div>
                        </div>
                        <div class="media-meta">
                          <div class="media-caption">Guide 1</div>
                          <div class="media-pager"><span class="cur">1</span> / <span class="total">6</span></div>
                        </div>
                      </div>
                      <p class="mt-4 text-sm text-center text-slate-600">
                        Click the image to view full-screen. Use   keys to navigate. Press ESC to close.
                      </p>
                    `
                }  
            },
            {
                id:'live-rooms',
                title:"Validating 'Live Rooms'",
                hook:"An exciting concept for social TV viewing promised to make live content more engaging with chat, reactions, and interactive features. But before investing in building it, we needed to validate whether this idea aligned with how people actually watch live TV today.",
                outcome:"Guided 'Go/No-Go' Decision",
                tags:['Concept Testing','Behavioral Research'],
                images:["./images/liverooms/1.png"],
                content:{
                    metrics:[
                        { value:"87%", label:"Liked interactive features" },
                        { value:"76%", label:"Preferred second-screen" },
                        { value:"56%", label:"Liked emoji reactions" },
                        { value:"41%", label:"Liked quizzes" }
                    ],
                    overview:`<div class="text-left text-sm space-y-6">
                        <div>
                            <h5 class="font-bold text-black text-lg">Background</h5>
                            <p class="text-gray-300 mt-1">Live Rooms is a conceptual feature aimed at enhancing real-time TV viewing with interactive social experiences. The idea is to allow users to chat, react with emojis, and participate in live trivia while watching their favorite shows or sport.</p>
                        </div>
                        <div>
                            <h5 class="font-bold text-black text-lg">Research Goals</h5>
                            <ul class="list-disc list-inside pl-4 space-y-2 mt-2">
                                <li><b>Evaluate whether the Live Rooms concept resonates with users.</b></li>
                                <li><b>Understand if real-time interaction can increase emotional investment, social connection, and engagement.</b></li>
                                <li><b>Ensure these interactions do not disrupt the core viewing experience.</b></li>
                                <li><b>Explore how users organically adopt these features across different content types (e.g., sports vs. reality shows).</b></li>
                                <li><b>Explore adoption across different platforms (TV vs. mobile).</b></li>
                            </ul>
                        </div>
                    </div>`,
                    methodology:`<h4>My Research Process & Tools</h4>
                        <div class="methodology-container mt-6">
                            <div class="methodology-item">
                                <h5>1. Concept Testing</h5>
                                <p>4 Participants with experience in interactive streaming like Twitch, Youtube Live, etc. 4 Participants with no experience in interactive streaming.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">User Interviews</span><span class="tag-badge">UserZoom</span><span class="tag-badge">Invision</span></div>
                            </div>
                            <div class="methodology-item">
                                <h5>2. Live Product Test - Round 1 (NBA Game)</h5>
                                <p>79 participants with varying age range. 95% participants responded to the feedback survey.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">LiveLike</span><span class="tag-badge">UserZoom</span></div>
                            </div>
                            <div class="methodology-item">
                                <h5>3. Live Product Test - Round 2 (Reality TV)</h5>
                                <p>35 participants with 98% survey response rate.</p>
                                <div class="mt-4 flex flex-wrap gap-2"><span class="tag-badge">LiveLike</span><span class="tag-badge">UserZoom</span></div>
                            </div>
                        </div>`,
                    analysis:`<div class="space-y-8">
                        <div>
                            <h4 class="font-bold text-black text-lg mb-4">Initial Concept Insights</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4 text-left">
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Interest in Social Features</h5>
                                    <p class="text-sm text-gray-300">Users showed interest, but the ideal level and format of interaction remained unclear.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Second-Screen Behavior</h5>
                                    <p class="text-sm text-gray-300">There is potential value in second-screen experiences, but we need to explore when and how users naturally engage.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Role of Interactive Elements</h5>
                                    <p class="text-sm text-gray-300">Reactions and quizzes were received positively, but their role in sustained engagement is unknown.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">User Behavior & Content Type</h5>
                                    <p class="text-sm text-gray-300">The concept raised questions about how different user types would navigate this experience.</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-black text-lg mb-4">Live Testing Insights</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4 text-left">
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Control is Key</h5>
                                    <p class="text-sm text-gray-300"><b>87%</b> of users liked interactive features but wanted control, like turning chat on/off.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Second-Screen Experience</h5>
                                    <p class="text-sm text-gray-300"><b>76%</b> preferred using their phone to interact while watching on TV.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Positive Feedback on Interactive Elements</h5>
                                    <p class="text-sm text-gray-300">Emoji reactions (<b>56%</b>) and quizzes (<b>41%</b>) boosted engagement and made the experience more fun.</p>
                                </div>
                                <div class="insight-card p-4">
                                    <h5 class="font-bold text-black mb-2">Usability & Content Adaptation</h5>
                                    <p class="text-sm text-gray-300"><b>40%</b> felt chat was overwhelming. Sports fans liked fast chat, while reality TV fans preferred polls and quizzes.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,
                    results:`<div class="space-y-8">
                        <p class="text-center text-lg text-gray-300">The Live Rooms concept was a clear win with high user engagement. The experience proved that interactive features can meaningfully enhance live TV viewing.</p>
                        <h4 class="font-bold text-black text-lg">Business Impact</h4>
                        <div class="grid md:grid-cols-3 gap-4 mt-4 text-gray-300 text-sm">
                            <div class="panel p-4">
                                <h5 class="font-bold text-black text-base mb-2 text-center">Jersey Shore Family Vacation</h5>
                                <ul class="list-none space-y-1.5">
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Unique Viewers:</span><span class="text-black font-semibold">13,668</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">View Time (Hrs):</span><span class="text-black font-semibold">43,017</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Hrs per User:</span><span class="text-black font-semibold">3.1</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Impact:</span><span class="text-black font-semibold">1,822,664,704</span></li>
                                </ul>
                            </div>
                            <div class="panel p-4">
                                <h5 class="font-bold text-black text-base mb-2 text-center">BET Awards</h5>
                                <ul class="list-none space-y-1.5">
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Unique Viewers:</span><span class="text-black font-semibold">14,889</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">View Time (Hrs):</span><span class="text-black font-semibold">33,054</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Hrs per User:</span><span class="text-black font-semibold">2.2</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Impact:</span><span class="text-black font-semibold">1,082,710,213</span></li>
                                </ul>
                            </div>
                            <div class="panel p-4">
                                <h5 class="font-bold text-black text-base mb-2 text-center">The Chi</h5>
                                <ul class="list-none space-y-1.5">
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Unique Viewers:</span><span class="text-black font-semibold">12,097</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">View Time (Hrs):</span><span class="text-black font-semibold">38,207</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Hrs per User:</span><span class="text-black font-semibold">3.2</span></li>
                                    <li class="flex justify-between items-center"><span class="font-medium text-gray-400">Impact:</span><span class="text-black font-semibold">1,479,008,253</span></li>
                                </ul>
                            </div>
                        </div>
                        <p class="text-center text-lg mt-8 text-gray-300">The test set a solid foundation for future innovation. The user enthusiasm and clear engagement signals remain strong indicators of potential, positioning Sling to lead in redefining the live viewing experience when the time is right.</p>
                    </div>`,
                  media: `
                      <h4 class="text-xl font-bold text-slate-900">Media</h4>
                      <div class="media-viewer mt-3" data-media='${JSON.stringify(
                        Array.from({length:8},(_,i)=>`./images/liverooms/${i+1}.png`)
                      )}'>
                         <div class="media-stage">
                          <img alt="Live Rooms 1" />
                          <div class="media-controls">
                            <button class="media-btn prev" aria-label="Previous">&#10094;</button>
                            <button class="media-btn next" aria-label="Next">&#10095;</button>
                          </div>
                        </div>
                        <div class="media-meta">
                          <div class="media-caption">Guide 1</div>
                          <div class="media-pager"><span class="cur">1</span> / <span class="total">8</span></div>
                        </div>
                      </div>
                      <p class="mt-4 text-sm text-center text-slate-600">
                        Click the image to view full-screen. Use   keys to navigate. Press ESC to close.
                      </p>
                    `
                }
            },
        ];

        /* ================= Testimonials (FULL NEW DATA) ================= */
        const testimonials=[ 
            { quote:"I had the privilege of working with Sphoorthy on our UX/Design team at Sling/Dish TV. Sphoorthy is a very knowledgeable and high quality UX researcher. She helped us gain tremendous consumer insights and improved the velocity and prioritization of our product development roadmap. She is also methodical, thoughtful and collaborative in her approach. I highly recommend her!", author:"Gary Schanman", company:"Fortune 250 C-Level Executive | Media, Sports & Telecom Leader", featured:true },
            { quote:"I had the pleasure of working with Sphoorthy at Sling, where she consistently brought a thoughtful and user-centric approach to our product development process. Her research was always thorough, actionable, and aligned with both user needs and business goals. Sphoorthy is a collaborative partner who elevates the teams she work with. Any organization would benefit from her expertise.", author:"AL Shanmugam", company:"Head of Product | AI, Personalization & Platform Growth", featured:true },
            { quote:"Sphoorthy was an invaluable asset to the Sling TV team, leaving an indelible mark on the organization. As a mentor in the realm of user research, she elevated the team's expertise, instilling greater confidence in their ability to identify user pain points and explore the underlying causes with a deeper, more insightful approach. Her contributions have been pivotal in shaping the future of Sling TV, and the product team will forever be grateful for the data and insights that will help make the upcoming redesign the most intuitive and exceptional TV UI in the industry.", author:"Erik Jonathan Nava", company:"Lead Design System Designer @ AXS", featured:false },
            { quote:"Sphoorthy was a great advocate for user research at DISH/Sling. As a UXR in a different department, I appreciated her efforts to connect research groups across the organization, share insights and connect with other business groups. She would be an excellent addition to your research team!", author:"Caroline Condon", company:"Product Development | Human-centered Design", featured:false },
            { quote:"I've had the pleasure to work with Sphoorthy, and it is rare to come across a UX Researcher with such a powerful combination of strategic vision, deep user empathy, and methodological expertise. With over a decade of experience, Sphoorthy brings an unmatched ability to translate complex user needs into clear, actionable insights that consistently drive innovation and product excellence. She has a unique ability to tell compelling stories with the data. Her insights don't just answer questions, they inspire action. ... On top of her skillset, Sphoorthy is simply a pleasure to work with.", author:"Erika Nelson", company:"Senior Business Development Manager @ DISH Network & Sling TV", featured:false },
            { quote:"I had the opportunity to work with Sphoorthy during our shared time together at EchoStar... Sphoorthy's passion for creating top-notch UX experiences came through in all that she did, and that passion, combined with her drive, contributed to not only her success, but the success of the projects she managed.", author:"Debbie G. Freeman, MBA", company:"Insights & Strategic Brand Marketing Executive", featured:true },
            { quote:"Sphoorthy was an incredible partner to work with on our design team. As a Senior UX Researcher, she helped us level up how we approached research  not by always running the studies herself, but by empowering designers with the right methods, tools, and frameworks to find meaningful insights. ... Sphoorthy also created foundational guidelines and UX scoring systems that brought more consistency to how we tested features  helping us make more confident, data-informed decisions.", author:"Saumya Ghai", company:"Senior Product Designer at Sling TV", featured:false },
            { quote:"I had the pleasure of working with Sphoorthy, who is a highly skilled UX Researcher with expertise in mixed methods, including effective survey design and distribution. We collaborated closely on projects where she excelled at collecting actionable insights from user feedback. Her work on survey design and usability scoring, combined with her ability to manage multiple projects simultaneously, consistently delivered impactful results for Sling TV. Her get-it-done attitude was so refreshing to see!", author:"Claire Chung", company:"Improving Customer Experience and Products @Spectrum", featured:false },
            { quote:"Ive had the pleasure of working with Sphoorthy on multiple projects over the years, and shes consistently been a thoughtful, strategic, and collaborative UX researcher. She brings clarity to every study, shaping research plans, refining materials, and ensuring the methods align with the goals of the project. ... Beyond the research itself, Sphoorthy is exceptional at turning findings into clear, compelling stories that resonate with stakeholders of all kinds.", author:"Gil M.", company:"Product Designer", featured:false },
            { quote:"Sphoorthy has all the qualities youd want in an excellent researcher - shes collaborative, thoughtful, organized, helpful and curious. She excels at facilitating research herself, as well as helping designers and product managers discover the right methodology for the questions they have. She wrangles teams to work together and reduce siloed thinking. Id happily recommend Sphoorthy for any research team.", author:"Brandon Melchior", company:"VP of Product Design at AXS", featured:true },
            { quote:"I've had the privilege of working with Sphoorthy Masa over the last two years at Sling TV. She is a dedicated UX Research Professional who was instrumental in partnering with our Product and Design teams to create and implement our weekly UX Research Cadence, Client Scripting, and Weekly/Monthly Insight Dashboards. ... Above all, she is a warm and charismatic colleague to be around with a fantastic sense of humor.", author:"Steven Cramer", company:"Product Design Leader at DISH / Sling TV", featured:true },
            { quote:"Sphoorthy is an exceptionally skilled UX researcher and manager, known for her inquisitive nature and methodical approach. She demonstrates a deep mastery of UX research methodologies, best practices, and industry knowledge. ... As a designer, I had the privilege of working closely with her on multiple product features and releases. I consistently relied on her guidance to uncover meaningful insights and gain a deeper understanding of user needs and behaviors.", author:"Matthew Hardy", company:"Product Designer", featured:false },
            { quote:"Sphoorthy has deep knowledge and intuition on how to approach UX research strategically. She can efficiently whip up the perfect study that informs the design direction and next steps, and knows when we have just the right amount of data. She also has a masterful and diplomatic way of teaching others (like me) how to be more effective researchers and designers. Sphoorthy would be a formidable upgrade to any product team!", author:"Chris Varosy", company:"Product Design Leader and Culture Advocate", featured:true },
            { quote:"I had the pleasure of collaborating with Sphoorthy during her tenure as a UX Researcher at Sling/DISH. Her strategic research planning and cross-functional collaboration significantly enhanced our product development. Notably, she implemented UMUX-Lite scoring for benchmarking, build out comprehensive and recurrent feature surveys, designed numerous individual studies for various squads, conducted user interviews, and managed the UserZoom platform.", author:"Emily Tuteur", company:"Design Leader and Product Strategist", featured:true },
            { quote:"Sphoorthy is an exceptional UX researcher whose insights have been invaluable to our team. She consistently delivers thorough, user-driven research that shapes our design decisions and enhances the overall product experience. ... She brings a positive and proactive approach to every challenge.", author:"Eliana Grossman", company:"UX Designer", featured:false },
            { quote:"Sphoorthy has a GIFT for uncovering what really matters to users. Her research is sharp, actionable, and always grounded in empathy. She brings clarity to complex problems and makes collaboration feel effortless. Id work with her again in a heartbeat and highly recommend her.", author:"Anish Raul", company:"Generative AI & Personalisation Leader", featured:true },
            { quote:"I worked with Sphoorthy at Sling TV on multiple projects and shes been an instrumental part of the team. Her invaluable research skills and knowledge of creative research practices is hard to find. She would be a valuable part of any team and is a pleasure to work with. She even completed her masters while still maintaining her workload and as the only person on her team.", author:"Lara Bingham", company:"Customer obsessed professional", featured:false },
            { quote:"My Consumer Insights team and I had the pleasure of working with Sphoorthy on several key projects that blend CI and UX. Her thoughtful approach to UX research and collaboration with our team has been invaluable. She has a great ability to translate user needs into impactful, actionable insights, and her collaborative mindset and attention to detail make her a fantastic partner on cross-functional teams.", author:"David Duganne", company:"General Manager - Consumer Insights at DISH Network", featured:false },
            { quote:"I have worked with Sphoorthy within the Sling/Dish product team. Our collaboration on projects like DIsh Android TV Homescreen and Info cards demonstrated her exceptional research skills and dedication. She revolutionized our approach to UX testing by eliminating preference testing and focusing on understanding user behavior, resulting in deeper insights into user needs.", author:"Mincho Kavaldzhiev,PhD", company:"Designer at Amazon", featured:false },
            { quote:"I collaborated closely with Sphoorthy on several key projects... She consistently demonstrated exceptional attention to detail and deep empathy for our users in every aspect of user research, from conducting insightful user interviews and analyzing survey data to facilitating engaging card sorting sessions. ... What truly set Sphoorthy apart were her exceptional communication skills.", author:"Maryna L.", company:"Product Designer prev. Sling TV", featured:false },
            { quote:"Sphoorthy is a kind and positive person. She is very detail oriented and methodical, and invests many hours in her research, producing an organized and clear delivery.", author:"Kyunghee Lee", company:"Product & UX Strategy", featured:false },
            { quote:"Sphoorthy is an asset to any product team that wants to ensure data-driven decisions. I worked with Sphoorthy many times testing various designs and she always knew the best method to utilize to get the questions we had answered. Working with Sphoorthy is easy because she is cognizant of details and communicates throughout every step of the research process.", author:"Matt Dean", company:"Sr. Product Design Contractor", featured:false },
            { quote:"When it comes to user experience (UX) strategy, Sphoorthy knows what to do and she does it. ... Sphoorthy was very good at keeping the project moving forward. Because she knows the UX process and is task oriented she would look forward to what needed to be done and make plans to complete the work. She willingly participated in every step of the way.", author:"Randal Flamm", company:"UX Designer at Emplify", featured:false },
            { quote:"Sphoorthy exhibits great drive and initiative. Her experience and ability to move forward without needing extensive direction was a great asset when working on fast paced, strategic projects that needed DUX expertise. She always had a great attitude and is someone I really enjoyed having on my teams.", author:"Alicia Waletzko, RHIA, PMP", company:"Innovation Integration Partner", featured:false },
            { quote:"I have had the opportunity to work alongside Sphoorthy with a few different projects. She brings a great personality to the teams she works with. Here attention to detail, interview techniques and communication skills is an wonderful asset. She focuses on really understanding the customer's processes... and is great at bring their experiences and voice to the work.", author:"Rebecca Bryan", company:"Solution Owner Pharmacy Optimization", featured:false },
            { quote:"I would recommend Sphoorthy as she is knowledgeable about User Experience and cares about her work. She is an active listener and asks the proper questions to help keep agendas moving along. Sphoorthy is a great teammate and someone you can count on to be successful.", author:"Lance Mason", company:"IT Project Manager at Kwik Trip, Inc.", featured:false },
            { quote:"I have had the opportunity to work with Sphoorthy on several occasions. She is extremely knowledgeable and organized. She is a pleasure to work with and is a valuable member of any team she is a part of.", author:"Jessica Easterday", company:"Director-Virtual Care at Emplify Health by Gundersen", featured:false },
            { quote:"I have collaborated with Sphoorthy on a number of occasions. She is engaged in and passionate about her work. She is knowledgeable and talented and great to work with.", author:"Mark Erickson", company:"Director, Enterprise Architecture and Solution Design", featured:false },
            { quote:"I worked with Sphoorthy on one of our projects at Gundersen Health System; a collaboration between DUX and PX. Sphoorthy was very collaborative, communicative and responsive. All the qualities you would want from an excellent team player.", author:"Christy Onyeabor, MSHCM", company:"Operations Manager at Mayo Clinic Health System", featured:false },
            { quote:"Sphoorthy was a great colleague. She was very knowledgeable about user experience and jumped right into any project she was on.", author:"Jenessa Miller", company:"Principal Application Analyst at Vanderbilt University Medical Center", featured:false },
            { quote:"Sphoorthy is a very talented UX designer and often offered great insight into how we approached both web applications and pages. With a diverse set of design and technical skills, Sphoorthy would be a great asset to have as part of any team or project", author:"Rudy Slama", company:"Art Direction, Design & Illustration", featured:false }
        ];

        /* ========== NEW Hero Showcase JS ========== */

        const heroTrack = document.querySelector('.hero-track');

        function initHeroShowcase() {
            if (!heroTrack) return;

            heroTrack.innerHTML = '';
            const projectsToShow = projects.slice(0, 3);

            projectsToShow.forEach((project) => {
                const card = document.createElement('article');
                card.className = 'hero-card';
                card.innerHTML = `
                    <div class="hero-image-container">
                        <img src="${project.images[0]}" alt="${project.title} screenshot">
                    </div>
                    <div class="hero-content">
                        <div class="hero-meta">
                            ${project.tags.map(tag => `<span>${tag}</span>`).join('')}
                        </div>
                        <h2>${project.title}</h2>
                        <p>${project.hook}</p>
                        <div class="hero-buttons">
                            <button class="btn btn-primary" data-project-id="${project.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                                </svg>
                                View Details
                            </button>
                        </div>
                    </div>
                `;

                heroTrack.appendChild(card);
            });
        }

        /* ========== Other JS (Modal, Testimonials, etc.) ========== */
        
        function initOtherJS() {
            createTestimonialScroller();
            initModalControls();
        }
        
        /** Modal Logic */
        const modal = document.getElementById('project-modal');
        const modalBody = modal.querySelector('.modal-body');
        const modalTitle = modal.querySelector('.modal-header h3');
        const modalCloseBtn = modal.querySelector('.modal-close-btn');

        function openProjectModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;

            modalTitle.textContent = project.title;
            
            modalBody.innerHTML = `
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    ${project.content.metrics.map(m=>`<div class="metric-card"><div class="metric-card-value">${m.value}</div><div class="metric-card-label">${m.label}</div></div>`).join('')}
                </div>
                <div class="details-tabs flex flex-wrap items-center gap-2 mb-6">
                    <button data-tab="overview" class="active">Overview</button>
                    <button data-tab="methodology">Methodology</button>
                    <button data-tab="analysis">Analysis</button>
                    <button data-tab="results">Results</button>
                    <button data-tab="media">Media</button>
                </div>
                <div class="tab-content active" data-tab-content="overview">${project.content.overview}</div>
                <div class="tab-content" data-tab-content="methodology">${project.content.methodology}</div>
                <div class="tab-content" data-tab-content="analysis">${project.content.analysis}</div>
                <div class="tab-content" data-tab-content="results">${project.content.results}</div>
                <div class="tab-content" data-tab-content="media">${project.content.media}</div>
            `;
            
            modal.classList.add('open');
            document.body.style.overflow = 'hidden';

            initModalTabs(modalBody);
            if (project.content.media && modalBody.querySelector('[data-tab-content="media"] .media-viewer')) {
                initMediaViewer(modalBody.querySelector('[data-tab-content="media"]'));
            }
        }

        function closeModal() {
            modal.classList.remove('open');
            document.body.style.overflow = 'auto';
            modalBody.innerHTML = '';
        }

        function initModalTabs(modalElement) {
            modalElement.addEventListener('click', (e) => {
                if (e.target.matches('.details-tabs button')) {
                    const tabId = e.target.dataset.tab;
                    const tabs = modalElement.querySelectorAll('.details-tabs button');
                    const contents = modalElement.querySelectorAll('.tab-content');
                    
                    tabs.forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    contents.forEach(c => {
                        c.classList.toggle('active', c.dataset.tabContent === tabId);
                    });
                }
            });
        }
        
        function initModalControls() {
            // Hero button clicks (must use event delegation)
            heroTrack.addEventListener('click', (e) => {
                const button = e.target.closest('.btn-primary');
                if (button) {
                    openProjectModal(button.dataset.projectId);
                }
            });

            // Close button
            modalCloseBtn.addEventListener('click', closeModal);
            // Close on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            // Close on 'Escape' key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('open')) {
                    closeModal();
                }
            });
        }

        /** Testimonial Scroller */
        function createTestimonialScroller(){
            const scroller=document.getElementById('testimonial-scroller');
            if(!scroller) return;
            const inner=document.createElement('div');
            inner.className='scroller-inner';
            const html=testimonials.map(t=>{
                const badge=t.featured?`<span class="absolute top-4 right-4 text-white text-xs font-bold px-3 py-1 rounded-full" style="background-color: var(--color-primary);">Leadership</span>`:'';
                // UPDATED: Added author-info wrapper and fixed classes
                return `<div class="testimonial-card panel">${badge}<p class="text-base italic text-gray-300">"${t.quote}"</p><div class="author-info"><p class="font-semibold not-italic text-black mt-4">- ${t.author}</p><p class="text-sm text-gray-400">${t.company}</p></div></div>`;
            }).join('');
            inner.innerHTML=html+html;
            scroller.appendChild(inner);
        }

        /* ========== Lightbox Logic (for Media tab) ========== */
        function initMediaViewer(root){
            const wrap=root.querySelector('.media-viewer');
            if(!wrap) return;
            const mediaData = wrap.getAttribute('data-media');
            if (!mediaData) return;
            const images=JSON.parse(mediaData);
            
            const stageImg=wrap.querySelector('.media-stage img');
            const prevBtn=wrap.querySelector('.media-btn.prev');
            const nextBtn=wrap.querySelector('.media-btn.next');
            const capEl=wrap.querySelector('.media-caption');
            const curEl=wrap.querySelector('.media-pager .cur');
            const totalEl=wrap.querySelector('.media-pager .total');

            if (images.length === 0) {
                wrap.innerHTML = "<p>No media available for this project.</p>";
                return;
            }

            let idx=0;
            if(totalEl) totalEl.textContent=String(images.length);

            const setIndex=(i)=>{
                idx=Math.max(0,Math.min(images.length-1,i));
                if(stageImg) {
                    stageImg.src=images[idx];
                    stageImg.alt=`Guide ${idx+1}`;
                }
                if(capEl) capEl.textContent=`Guide ${idx+1}`;
                if(curEl) curEl.textContent=String(idx+1);
                if(prevBtn) prevBtn.disabled=(idx===0);
                if(nextBtn) nextBtn.disabled=(idx===images.length-1);
            };
            const goPrev=()=>setIndex(idx-1);
            const goNext=()=>setIndex(idx+1);

            if(prevBtn) prevBtn.addEventListener('click',goPrev);
            if(nextBtn) nextBtn.addEventListener('click',goNext);
            if(stageImg) stageImg.addEventListener('click',()=>openLightbox(images,idx,setIndex));

            setIndex(0);
        }

        let __lightbox;
        function ensureLightbox(){
            if(__lightbox) return __lightbox;
            const lb=document.createElement('div');
            lb.className='lightbox';
            lb.innerHTML=`
                <div class="lightbox-inner">
                    <div class="lightbox-stage">
                        <img alt="" />
                        <div class="lightbox-controls">
                            <button class="lightbox-btn prev" aria-label="Previous">&#10094;</button>
                            <button class="lightbox-btn next" aria-label="Next">&#10095;</button>
                        </div>
                    </div>
                    <div class="lightbox-topbar">
                        <div class="lb-caption">Guide 1</div>
                        <div class="lb-pager"><span class="cur">1</span> / <span class="total">16</span></div>
                        <button class="close" aria-label="Close">&times;</button>
                    </div>
                </div>`;
            document.body.appendChild(lb);
            __lightbox=lb; return lb;
        }
        function openLightbox(images,startIndex=0,syncParentIndex=null){
            const lb=ensureLightbox();
            const img=lb.querySelector('.lightbox-stage img');
            const prev=lb.querySelector('.lightbox-btn.prev');
            const next=lb.querySelector('.lightbox-btn.next');
            const closeBtn=lb.querySelector('.lightbox-topbar .close');
            const cap=lb.querySelector('.lb-caption');
            const cur=lb.querySelector('.lb-pager .cur');
            const tot=lb.querySelector('.lb-pager .total');
            tot.textContent=String(images.length);

            let i=startIndex;
            const setI=(n)=>{
                i=Math.max(0,Math.min(images.length-1,n));
                img.src=images[i];
                img.alt=`Guide ${i+1}`;
                cap.textContent=`Guide ${i+1}`;
                cur.textContent=String(i+1);
                prev.disabled=(i===0);
                next.disabled=(i===images.length-1);
                if(typeof syncParentIndex==='function') syncParentIndex(i);
            };
            const goPrev=()=>setI(i-1);
            const goNext=()=>setI(i+1);
            const onKey=(e)=>{
                if(e.key==='Escape') close();
                else if(e.key==='ArrowLeft') goPrev();
                else if(e.key==='ArrowRight') goNext();
            };
            const close=()=>{
                lb.classList.remove('open');
                document.removeEventListener('keydown',onKey);
            };
            prev.onclick=goPrev; next.onclick=goNext; closeBtn.onclick=close;
            lb.onclick=(e)=>{ if(e.target===lb) close(); };
            document.addEventListener('keydown',onKey);
            setI(startIndex);
            lb.classList.add('open');
        }

        /* ========== Kick it off ========== */
        initHeroShowcase();
        initOtherJS();

    });
    </script>
</body>
</html>
